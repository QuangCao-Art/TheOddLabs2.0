<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Odd Labs 2.0</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="game-container">
        <!-- Main Menu Screen -->
        <div id="screen-main-menu" class="screen">
            <h1 class="game-title">THE ODD <span class="neon-text">LABS 2.0</span></h1>
            <div class="menu-options">
                <button id="btn-start-battle" class="btn-neon">START BATTLE</button>
                <button id="btn-open-cell-container" class="btn-neon">CELL CONTAINER</button>
                <button id="btn-open-rulebook" class="btn-neon">RULEBOOK</button>
                <button class="btn-neon disabled">SETTINGS</button>
            </div>
            <div class="version">Experimental v2.0</div>
        </div>

        <!-- Cell Container (Team Management) -->
        <div id="screen-cell-container" class="screen hidden">
            <button id="btn-container-back" class="btn-neon-mini">BACK</button>
            <div id="container-layout">
                <section id="team-loadout" class="glass-panel">
                    <h3 class="panel-title">ACTIVE <span class="neon-text">TEAM</span></h3>
                    <div class="team-slots">
                        <div class="slot" data-slot="0"></div>
                        <div class="slot" data-slot="1"></div>
                        <div class="slot" data-slot="2"></div>
                    </div>
                </section>

                <section id="celldex-grid" class="glass-panel">
                    <h3 class="panel-title">CELL <span class="neon-text">DEX</span></h3>
                    <div class="grid-container"></div>
                </section>
            </div>
        </div>

        <!-- Monster Card Modal -->
        <div id="monster-card-modal" class="overlay hidden">
            <div class="card-display">
                <img id="card-img" src="" alt="Monster Card">
                <button id="btn-close-card" class="btn-neon-mini">CLOSE</button>
            </div>
        </div>

        <!-- Rulebook Screen -->
        <div id="screen-rulebook" class="screen hidden">
            <div id="rulebook-panel" class="glass-panel">
                <div class="rulebook-header">
                    <h2 class="neon-text">TACTICAL <span class="white-text">MANUAL v2.4</span></h2>
                    <div class="header-line"></div>
                </div>

                <div class="rulebook-grid">
                    <!-- CARD: HOW TO PLAY -->
                    <div class="rule-card">
                        <div class="card-accent"></div>
                        <h3><span class="icon">üéØ</span> HOW TO PLAY</h3>
                        <p>Combat is a simultaneous hidden-reveal duel. Predict the enemy's node to maximize impact.</p>
                        <div class="map-table">
                            <div class="map-row match">
                                <span class="label">MATCH</span>
                                <span class="value">1.25x DMG | +3 PP</span>
                            </div>
                            <div class="map-row near">
                                <span class="label">NEAR</span>
                                <span class="value">1.00x DMG | +2 PP</span>
                            </div>
                            <div class="map-row far">
                                <span class="label">FAR</span>
                                <span class="value">0.75x DMG | +1 PP</span>
                            </div>
                        </div>
                    </div>

                    <!-- CARD: CORE MECHANICS -->
                    <div class="rule-card">
                        <div class="card-accent red"></div>
                        <h3><span class="icon">‚öñÔ∏è</span> CORE LAWS</h3>
                        <div class="rule-item">
                            <div class="item-title">PELLICLE OVERLOAD</div>
                            <p>Entering a turn with 10 PP triggers **Emergency Discharge**, dealing 10 HP damage to
                                self.</p>
                        </div>
                        <div class="rule-item">
                            <div class="item-title">REACTIVE DEFENSE</div>
                            <p>During Defense Phase, active skills reflect damage or manipulate MAP results.</p>
                        </div>
                    </div>

                    <!-- CARD: GLOSSARY -->
                    <div class="rule-card">
                        <div class="card-accent blue"></div>
                        <h3><span class="icon">üß™</span> KEY TERMS</h3>
                        <ul class="glossary-list">
                            <li><strong>PP</strong>: Tactical energy for powerful skills.</li>
                            <li><strong>PELLICLE</strong>: A shield that must be broken to damage HP.</li>
                            <li><strong>NODES</strong>: The 5 tactical positions of the Pentagon.</li>
                        </ul>
                    </div>
                </div>

                <div class="rulebook-footer">
                    <button id="btn-rulebook-back" class="btn-neon">RETURN TO BASE [ESC]</button>
                </div>
            </div>
        </div>

        <!-- Battle Arena Screen -->
        <div id="screen-battle" class="screen hidden">
            <button id="btn-battle-back" class="btn-neon-mini">BACK</button>

            <div id="battle-layout">
                <!-- BATTLE TACTICAL SIDEBAR (LEFT) -->
                <aside id="battle-click-card" class="glass-panel">
                    <div class="card-wrapper">
                        <img id="battle-card-img" src="assets/images/Card_Back.png" alt="Monster Card">
                    </div>
                    <div id="battle-card-bio" class="card-bio">
                        <h3>MONSTER DATA</h3>
                        <p id="bio-text">Select a cellular entity to initialize tactical readout.</p>
                    </div>
                </aside>

                <!-- MAIN BATTLE ARENA (LEFT/CENTER) -->
                <main id="battle-scene">
                    <div id="battle-log"></div>
                    <!-- ENEMY SIDE (TOP) -->
                    <section class="combatant-display enemy-display">
                        <div class="character-vitals">
                            <div class="name">Nitrophil</div>
                            <div class="vitals-stats">
                                <div class="vitals-row">
                                    <div class="bar-label">HP</div>
                                    <div class="bar-bg">
                                        <div class="bar-fill hp-fill" style="width: 100%;"></div>
                                    </div>
                                    <span class="bar-value" id="enemy-hp-val">100 / 100</span>
                                </div>
                                <div class="vitals-row">
                                    <div class="bar-label">PP</div>
                                    <div class="bar-bg">
                                        <div class="bar-fill pp-fill" style="width: 30%;"></div>
                                    </div>
                                    <span class="bar-value" id="enemy-pp-val">3 / 10</span>
                                </div>
                            </div>
                        </div>
                        <div class="monster-portrait-container">
                            <img src="assets/images/Nitrophil.png" alt="Enemy" class="monster-portrait enemy-img">
                        </div>
                    </section>


                    <!-- PLAYER SIDE (BOTTOM) -->
                    <section class="combatant-display player-display">
                        <div class="monster-portrait-container">
                            <img src="assets/images/Nitrophil.png" alt="Player" class="monster-portrait player-img">
                        </div>
                        <div class="character-vitals">
                            <div class="name">Nitrophil</div>
                            <div class="vitals-stats">
                                <div class="vitals-row">
                                    <div class="bar-label">HP</div>
                                    <div class="bar-bg">
                                        <div class="bar-fill hp-fill" style="width: 100%;"></div>
                                    </div>
                                    <span class="bar-value" id="player-hp-val">100 / 100</span>
                                </div>
                                <div class="vitals-row">
                                    <div class="bar-label">PP</div>
                                    <div class="bar-bg">
                                        <div class="bar-fill pp-fill" style="width: 30%;"></div>
                                    </div>
                                    <span class="bar-value" id="player-pp-val">3 / 10</span>
                                </div>
                            </div>
                        </div>
                    </section>
                </main>

                <!-- COMMAND ZONE (RIGHT PANEL) -->
                <aside id="command-zone" class="glass-panel">
                    <!-- TURN/STATUS INDICATOR (MOVED TO TOP) -->
                    <div id="battle-status">
                        <div class="turn-indicator">YOUR TURN</div>
                        <div class="phase-label">NODE SELECTION</div>
                    </div>
                    <div class="pentagon-interface">
                        <div class="pentagon-container" id="interactive-pentagon">
                            <div class="pentagon-shape"></div>
                            <div class="node" data-index="0" style="--angle: 0deg;"></div>
                            <div class="node" data-index="1" style="--angle: 72deg;"></div>
                            <div class="node" data-index="2" style="--angle: 144deg;"></div>
                            <div class="node" data-index="3" style="--angle: 216deg;"></div>
                            <div class="node" data-index="4" style="--angle: 288deg;"></div>

                            <!-- Draggable Central Core -->
                            <div id="selection-core" class="draggable-core"></div>
                        </div>
                    </div>

                    <div class="command-controls">
                        <div class="moveset">
                            <button class="move-btn active" data-move="membrane_pierce">
                                <span class="move-name">Membrane Pierce</span>
                                <div class="move-stats-row"><span class="move-power">POW 40</span><span
                                        class="move-cost">0 PP</span></div>
                            </button>
                            <button class="move-btn" data-move="oxidative_purge">
                                <span class="move-name">Oxidative Purge</span>
                                <div class="move-stats-row"><span class="move-power">POW 55</span><span
                                        class="move-cost">3 PP</span></div>
                            </button>
                            <button class="move-btn" data-move="nitric_burst">
                                <span class="move-name">Nitric Burst</span>
                                <div class="move-stats-row"><span class="move-power">POW 60</span><span
                                        class="move-cost">6 PP</span></div>
                            </button>
                        </div>

                        <div id="move-info-panel" class="hidden">
                            <div id="info-move-name" class="neon-text">MOVE NAME</div>
                            <div id="info-move-desc">Tactical data loading...</div>
                        </div>
                    </div>
                </aside>
            </div>
        </div>

        <!-- Game Over Overlay -->
        <div id="game-over-overlay" class="overlay hidden">
            <div class="modal glass-panel">
                <h2 id="game-over-title">SYSTEM <span class="neon-text">FAILURE</span></h2>
                <p id="game-over-message">NITROPHIL has been neutralized.</p>
                <div class="modal-buttons">
                    <button id="btn-restart" class="btn-neon">REINITIALIZE</button>
                    <button id="btn-return-menu" class="btn-neon">MAIN MENU</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="src/main.js"></script>
</body>

</html>