<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Odd Labs 2.0</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="game-container">
        <!-- Main Menu Screen -->
        <div id="screen-main-menu" class="screen">
            <h1 class="game-title">THE ODD <span class="neon-text">LABS 2.0</span></h1>
            <div class="menu-options">
                <button id="btn-start-overworld" class="btn-neon">START GAME</button>
                <button id="btn-start-battle" class="btn-neon">DEBUG BATTLE</button>
                <button id="btn-open-management" class="btn-neon">SQUAD MANAGEMENT</button>
                <button id="btn-open-rulebook" class="btn-neon">RULEBOOK</button>
                <button class="btn-neon disabled">SETTINGS</button>
            </div>
            <div class="version">Experimental v2.0</div>
        </div>

        <!-- Overworld Screen -->
        <div id="screen-overworld" class="screen hidden">
            <div id="overworld-ui">
                <div id="log-count-display">DATA LOGS: <span id="log-count">0</span></div>
                <div id="location-display">LOCATION: <span id="location-name">LAB LOBBY</span></div>
            </div>
            <div id="overworld-viewport">
                <div id="overworld-map">
                    <div id="player-sprite"></div>
                </div>
            </div>

            <!-- Dialogue System -->
            <div id="dialogue-box" class="dialogue-box-style hidden">
                <div id="dialogue-content">
                    <span id="dialogue-name" class="dialogue-name-style">NAME</span>
                    <p id="dialogue-text" class="dialogue-text-style">Text content goes here...</p>
                </div>
                <div id="dialogue-indicator" class="dialogue-indicator-style">‚ñº</div>
            </div>

            <!-- NPC Full Art Portrait Overlay -->
            <div id="npc-portrait-overlay" class="hidden">
                <img id="npc-portrait-img" src="" alt="NPC Portrait">
            </div>
        </div>

        <!-- Pre-Battle Sequence Screen -->
        <div id="screen-pre-battle" class="screen hidden">
            <div id="pre-battle-content">
                <div id="pre-battle-bg"></div>
                <div id="pre-battle-portrait-container">
                    <img id="pre-battle-portrait" src="" alt="NPC Full Art">
                </div>
                <!-- Dialogue System (Reusing style) -->
                <div id="pre-battle-dialogue-box" class="dialogue-box-style hidden">
                    <div id="pre-battle-dialogue-content">
                        <span id="pre-battle-name" class="dialogue-name-style">NPC NAME</span>
                        <p id="pre-battle-text" class="dialogue-text-style">Pre-battle protocol initiated...</p>
                    </div>
                    <div id="pre-battle-indicator" class="dialogue-indicator-style">‚ñº</div>
                </div>
            </div>
        </div>

        <!-- Unified Management Hub (SQUAD & CATALYST) -->
        <div id="screen-management-hub" class="screen hidden">
            <div id="hub-header">
                <h2 class="neon-text">MANAGEMENT <span class="white-text">HUB</span></h2>
                <div id="profile-selector-container">
                    <div id="side-toggle-container">
                        <button id="btn-side-player" class="side-btn active" data-profile="player">PLAYER</button>
                        <button id="btn-side-opponent" class="side-btn" data-profile="opponent">RIVAL</button>
                        <button class="side-btn npc-btn" data-profile="lana">LANA</button>
                        <button class="side-btn npc-btn" data-profile="dyzes">DYZES</button>
                        <button class="side-btn npc-btn" data-profile="capsain">CAPSAIN</button>
                        <button class="side-btn npc-btn" data-profile="jenzi">JENZI</button>
                        <button class="side-btn npc-btn" data-profile="npc01">NPC01_M</button>
                        <button class="side-btn npc-btn" data-profile="npc02">NPC02_F</button>
                        <button class="side-btn npc-btn" data-profile="npc03">NPC03_M</button>
                    </div>
                    <div id="rg-debug-panel" class="glass-panel">
                        <div class="debug-row" style="display: flex; align-items: center; gap: 15px;">
                            <div style="display: flex; align-items: center; gap: 5px;">
                                <label id="debug-rg-label" style="margin:0;">ACTIVE RG:</label>
                                <input type="number" id="debug-active-rg" min="0" max="15" value="15"
                                    style="margin:0; width: 45px;">
                            </div>
                            <div id="enable-battle-container" style="display: none; align-items: center; gap: 8px;">
                                <label for="debug-enable-battle"
                                    style="font-size: 0.8rem; color: #fff; margin:0; line-height: 1;">ENABLE
                                    BATTLE:</label>
                                <input type="checkbox" id="debug-enable-battle" style="cursor: pointer; margin:0;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="management-layout">
                <aside id="squad-management" class="glass-panel">
                    <h3 class="panel-title squad-title">ACTIVE <span class="neon-text">SQUAD</span></h3>
                    <div class="team-slots">
                        <div class="slot" data-slot="0"></div>
                        <div class="slot" data-slot="1"></div>
                        <div class="slot" data-slot="2"></div>
                    </div>
                    <div class="setup-hint">DRAG TO ASSIGN | CLICK TO UPGRADE</div>

                    <div class="panel-divider"></div>

                    <h3 class="panel-title">CELL <span class="neon-text">STORAGE</span></h3>
                    <div class="grid-container">
                        <!-- Populated by JS -->
                    </div>
                </aside>

                <!-- Center: The Catalyst Core (Slots & Branching) -->
                <main id="catalyst-core" class="glass-panel">
                    <div id="selected-monster-header">
                        <div id="catalyst-name-container">
                            <h2 id="catalyst-monster-name" class="neon-text">SELECT CELL</h2>
                            <span id="catalyst-monster-rg" class="rg-label">RG-30</span>
                        </div>
                        <div id="catalyst-monster-stats-peek">
                            <span class="stat-mini">HP: <b id="peek-hp">--</b></span>
                            <span class="stat-mini">PP: <b id="peek-pp">--</b></span>
                            <span class="stat-mini">ATK: <b id="peek-atk">--</b></span>
                            <span class="stat-mini">DEF: <b id="peek-def">--</b></span>
                            <span class="stat-mini">SPD: <b id="peek-spd">--</b></span>
                            <span class="stat-mini">CRT: <b id="peek-crt">--</b></span>
                        </div>
                    </div>

                    <div id="slot-canvas-container">
                        <canvas id="slot-connections"></canvas>
                        <div id="slots-anchor">
                            <!-- Base 3 Slots and expanded slots will be injected here -->
                        </div>
                    </div>
                </main>

                <!-- Right: C-Card Box -->
                <aside id="catalyst-box" class="glass-panel">
                    <div class="box-header">
                        <h3 class="panel-title">C-CARD <span class="neon-text">BOX</span></h3>
                        <div class="sort-tabs">
                            <button class="sort-tab active" data-sort="tier">TIER</button>
                            <button class="sort-tab" data-sort="type">TYPE</button>
                            <button class="sort-tab" data-sort="rarity">RARITY</button>
                        </div>
                    </div>
                    <div id="card-box-grid">
                        <!-- Populated by JS -->
                    </div>
                </aside>
            </div>

            <div class="container-footer">
                <div id="protocol-hint">
                    <i class="fas fa-microscope"></i> PROTOCOL: MAX 10 SLOTS ‚Ä¢ UNIQUE IDS ‚Ä¢ RECURSIVE BRANCH REMOVAL
                </div>
                <button id="btn-hub-back" class="btn-neon">RETURN TO BASE [ESC]</button>
            </div>
        </div>

        <!-- Monster Card Modal -->
        <div id="monster-card-modal" class="overlay hidden">
            <div class="card-detail-view glass-panel">
                <button id="btn-close-card" class="card-close-btn">&times;</button>

                <div class="detail-layout">
                    <!-- Left Column: Visual -->
                    <div class="detail-visual">
                        <img id="detail-card-img" src="" alt="Monster Card">
                        <div class="detail-stats-grid">
                            <div class="stat-box">
                                <span class="stat-label">HP</span>
                                <span id="detail-hp" class="stat-value">---</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-label">PP</span>
                                <span id="detail-pp" class="stat-value">---</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-label">CRIT</span>
                                <span id="detail-crit" class="stat-value">---</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-label">ATK</span>
                                <span id="detail-atk" class="stat-value">---</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-label">DEF</span>
                                <span id="detail-def" class="stat-value">---</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-label">SPD</span>
                                <span id="detail-spd" class="stat-value">---</span>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Information -->
                    <div class="detail-info">
                        <div class="info-header">
                            <h2 id="detail-name" class="neon-text">NAME</h2>
                            <div id="detail-type-tag" class="type-tag">TYPE</div>
                        </div>

                        <div class="info-section">
                            <h4 class="section-title">MONSTER DATA</h4>
                            <p id="detail-lore">Loading encrypted data...</p>
                        </div>

                        <div class="info-section">
                            <h4 class="section-title">ATTACK SKILLS</h4>
                            <div id="detail-attack-skills" class="skill-list"></div>
                        </div>

                        <div class="info-section">
                            <h4 class="section-title">DEFENSE SKILLS</h4>
                            <div id="detail-defense-skills" class="skill-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Rulebook Screen -->
        <div id="screen-rulebook" class="screen hidden">
            <div id="rulebook-panel" class="glass-panel">
                <div class="rulebook-header">
                    <h2 class="neon-text">RULE BOOK</h2>
                    <div class="header-line"></div>
                </div>

                <div class="rulebook-grid">
                    <!-- CARD: HOW TO PLAY -->
                    <div class="rule-card">
                        <div class="card-accent orange"></div>
                        <h3><span class="icon">üéØ</span> HOW TO PLAY</h3>

                        <div class="rule-item">
                            <div class="item-title">1. SIMULTANEOUS PREDICTION</div>
                            <p>Every turn is a duel of minds. You and your RIVAL choose a **Node** on your respective
                                Pentagons at the same time.</p>
                        </div>

                        <div class="rule-item">
                            <div class="item-title">2. CHOOSING YOUR MOVE</div>
                            <p>‚Ä¢ <strong>Basic Skills</strong>: Cost 0 PP. Reliable energy builders.</p>
                            <p>‚Ä¢ <strong>Pellicle Skills</strong>: Cost stored PP. Heavy damage or tactical utility.</p>
                        </div>

                        <div class="rule-item">
                            <div class="item-title">3. THE MAP RESULT</div>
                            <p>Turn resolution depends on the "Distance" between selections:</p>
                            <div class="map-table">
                                <div class="map-row match">
                                    <span class="label">üéØ MATCH (Exact Same)</span>
                                    <span class="value">1.25x DMG | +3 PP</span>
                                </div>
                                <div class="map-row near">
                                    <span class="label">üìç NEAR (Neighbors)</span>
                                    <span class="value">1.00x DMG | +2 PP</span>
                                </div>
                                <div class="map-row far">
                                    <span class="label">üö´ FAR (Distance 2+)</span>
                                    <span class="value">0.75x DMG | +1 PP</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CARD: TACTICAL MAP SUITE -->
                    <div class="rule-card">
                        <div class="card-accent orange"></div>
                        <h3><span class="icon">‚ö°</span> MAP EFFECTS</h3>
                        <p>Specialized skills manipulate the battlefield with advanced effects:</p>
                        <ul class="glossary-list">
                            <li><strong>EASY TARGET</strong>: NEAR hits count as a perfect MATCH.</li>
                            <li><strong>DRUNK MAN</strong>: Distorts nodes; only 1 NEAR node remains.</li>
                            <li><strong>PERFECT STRIKE</strong>: Unavoidable; all nodes count as MATCH.</li>
                            <li><strong>RELIABLE HIT</strong>: Forces a NEAR result regardless of distance.</li>
                            <li><strong>PUNY SLAP</strong>: Intentional weak hit; all nodes count as FAR.</li>
                            <li><strong>ALL OR NOTHING</strong>: High-risk; massive falloff if not MATCH.</li>
                            <li><strong>CHOICEBLOCK</strong>: Prevents re-selecting your last used node.</li>
                            <li><strong>HURTBLOCK</strong>: Disables nodes used by BOTH players.</li>
                        </ul>
                    </div>

                    <!-- CARD: BATTLE LAWS -->
                    <div class="rule-card">
                        <div class="card-accent red"></div>
                        <h3><span class="icon">‚öñÔ∏è</span> CORE LAWS</h3>
                        <div class="rule-item">
                            <div class="item-title">PELLICLE OVERLOAD</div>
                            <p>Starting a turn with 10 PP triggers **Emergency Discharge**, dealing 10 HP recoil.</p>
                        </div>
                    </div>

                    <!-- CARD: ELEMENTAL TABLE -->
                    <div class="rule-card">
                        <div class="card-accent orange"></div>
                        <h3><span class="icon">üß¨</span> ELEMENTAL TABLE</h3>
                        <p>Tactical biological advantages allow for a 1.5x damage BREACH.</p>
                        <div class="ele-table">
                            <div class="ele-header">
                                <span>ATTACKER</span>
                                <span>ADVANTAGE (1.5x)</span>
                                <span>RESISTED (0.75x)</span>
                            </div>
                            <!-- Row: SOMATIC -->
                            <div class="ele-row" style="border-color: var(--type-somatic);">
                                <span class="type-name">SOMATIC</span>
                                <span class="type-adv">-</span>
                                <span class="type-weak">-</span>
                            </div>
                            <!-- Row: THERMOGENIC -->
                            <div class="ele-row" style="border-color: var(--type-thermogenic);">
                                <span class="type-name">THERMOGENIC</span>
                                <span class="type-adv">Botanic, Keratinized</span>
                                <span class="type-weak">Osmotic</span>
                            </div>
                            <!-- Row: OSMOTIC -->
                            <div class="ele-row" style="border-color: var(--type-osmotic);">
                                <span class="type-name">OSMOTIC</span>
                                <span class="type-adv">Thermogenic</span>
                                <span class="type-weak">Botanic, Electrolytic</span>
                            </div>
                            <!-- Row: BOTANIC -->
                            <div class="ele-row" style="border-color: var(--type-botanic);">
                                <span class="type-name">BOTANIC</span>
                                <span class="type-adv">Osmotic</span>
                                <span class="type-weak">Thermo, Keratin, Viral</span>
                            </div>
                            <!-- Row: ELECTROLYTIC -->
                            <div class="ele-row" style="border-color: var(--type-electrolytic);">
                                <span class="type-name">ELECTROLYTIC</span>
                                <span class="type-adv">Osmotic, Keratinized</span>
                                <span class="type-weak">Botanic</span>
                            </div>
                            <!-- Row: KERATINIZED -->
                            <div class="ele-row" style="border-color: var(--type-keratinized);">
                                <span class="type-name">KERATINIZED</span>
                                <span class="type-adv">-</span>
                                <span class="type-weak">Thermo, Electrolytic</span>
                            </div>
                            <!-- Row: VIRAL -->
                            <div class="ele-row" style="border-color: var(--type-viral);">
                                <span class="type-name">VIRAL</span>
                                <span class="type-adv">Botanic</span>
                                <span class="type-weak">Keratinized</span>
                            </div>
                            <!-- Row: APOPTOTIC -->
                            <div class="ele-row" style="border-color: var(--type-apoptotic);">
                                <span class="type-name">APOPTOTIC</span>
                                <span class="type-adv">Apoptotic</span>
                                <span class="type-weak">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- CARD: GLOSSARY & TYPES -->
                    <div class="rule-card">
                        <div class="card-accent blue"></div>
                        <h3><span class="icon">üß™</span> KEY TERMS</h3>
                        <ul class="glossary-list">
                            <li><strong>Cell</strong>: Your monster/unit (e.g., Nitrophil).</li>
                            <li><strong>HP (Health Points)</strong>: Your life. If it hits 0, the mission fails.</li>
                            <li><strong>PP (Pellicle Points)</strong>: Your tactical energy. Generated by movement.</li>
                            <li><strong>Pellicle</strong>: A protective layer. Having PP reduces incoming damage.</li>
                            <li><strong>MAP (Matching Attack Placement)</strong>: The 5-node system for hit quality.
                            </li>
                            <li><strong>Node</strong>: One of the 5 positions on your tactical pentagon.</li>
                        </ul>
                    </div>
                </div>

                <div class="rulebook-footer">
                    <button id="btn-rulebook-back" class="btn-neon">RETURN TO BASE [ESC]</button>
                </div>
            </div>
        </div>

        <!-- Inventory Screen -->
        <div id="screen-inventory" class="overlay hidden">
            <div id="inventory-panel" class="glass-panel">
                <div class="header-with-tabs">
                    <h2 class="neon-text">INVENTORY</h2>
                    <div class="tabs">
                        <button class="tab-btn active" data-tab="logs">DATA LOGS</button>
                        <button class="tab-btn" data-tab="items">KEY ITEMS</button>
                        <button class="tab-btn" data-tab="status">CELL STATUS</button>
                    </div>
                </div>

                <div id="inventory-layout">
                    <!-- LEFT COLUMN: Lists/Grids -->
                    <div id="inventory-list-side">
                        <!-- Logs Section -->
                        <div id="tab-logs" class="inventory-tab">
                            <div class="log-list" id="inventory-log-list">
                                <!-- Populated by JS -->
                            </div>
                        </div>

                        <!-- Items Section -->
                        <div id="tab-items" class="inventory-tab hidden">
                            <div class="key-items-grid" id="inventory-item-grid">
                                <!-- Populated by JS -->
                            </div>
                        </div>

                        <!-- Status Section -->
                        <div id="tab-status" class="inventory-tab hidden">
                            <div class="status-list" id="inventory-status-list">
                                <!-- Populated by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- RIGHT COLUMN: Detailed Technical Readout -->
                    <div id="inventory-detail-panel" class="glass-panel">
                        <div class="detail-card-container">
                            <img id="inventory-detail-card" src="./assets/images/Card_Placeholder.png"
                                alt="Detail Card">
                        </div>
                        <div class="detail-text-content">
                            <h3 id="inventory-detail-title">SELECT DATA</h3>
                            <div class="header-line"></div>
                            <p id="inventory-detail-desc">Initial tactical readout standby...</p>
                        </div>
                    </div>
                </div>

                <div class="rulebook-footer">
                    <div class="inv-controls-guide">
                        <span><b>W/S</b> Navigate</span>
                        <span><b>Q/E</b> Tab</span>
                        <span><b>F</b> Select</span>
                        <span><b>CLICK IMG</b> Full-Screen</span>
                        <span><b>ESC</b> Back</span>
                    </div>
                    <button id="btn-inventory-back" class="btn-neon">BACK TO LAB</button>
                </div>
            </div>
        </div>

        <!-- Battle Arena Screen -->
        <div id="screen-battle" class="screen hidden">
            <button id="btn-battle-back" class="btn-neon-mini">BACK</button>
            <button id="btn-battle-rulebook" class="btn-neon-mini">RULE BOOK</button>

            <div id="battle-layout">
                <!-- BATTLE TACTICAL SIDEBAR (LEFT) -->
                <aside id="battle-click-card" class="glass-panel">
                    <div class="card-wrapper">
                        <div class="card-inner">
                            <div class="card-back">
                                <img id="battle-card-back-img" src="./assets/images/Card_Back.png" alt="Card Back">
                            </div>
                            <div class="card-front">
                                <img id="battle-card-front-img" src="./assets/images/Card_Nitrophil.png"
                                    alt="Monster Card">
                            </div>
                        </div>
                    </div>
                    <div id="battle-card-bio" class="card-bio">
                        <h3>MONSTER DATA</h3>
                        <p id="bio-text">Select a cellular entity to initialize tactical readout.</p>
                    </div>
                    <div class="card-stats-grid">
                        <div class="stat-box">
                            <span class="stat-label">HP</span>
                            <span class="stat-value" id="card-hp">---</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">PP</span>
                            <span class="stat-value" id="card-pp">---</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">CRIT</span>
                            <span class="stat-value" id="card-crit">---</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">ATK</span>
                            <span class="stat-value" id="card-atk">---</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">DEF</span>
                            <span class="stat-value" id="card-def">---</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">SPD</span>
                            <span class="stat-value" id="card-spd">---</span>
                        </div>
                    </div>
                </aside>

                <!-- MAIN BATTLE ARENA (LEFT/CENTER) -->
                <main id="battle-scene">
                    <div id="battle-log"></div>
                    <!-- ENEMY SIDE (TOP) -->
                    <section class="combatant-display enemy-display">
                        <div class="character-vitals">
                            <div class="name"><span class="name-val">Nitrophil</span> <span id="enemy-rg"
                                    class="rg-label">RG-15</span></div>
                            <div class="vitals-stats">
                                <div class="vitals-row">
                                    <div class="bar-label">HP</div>
                                    <div class="bar-bg">
                                        <div class="bar-fill hp-fill" style="width: 100%;"></div>
                                    </div>
                                    <span class="bar-value" id="enemy-hp-val">100 / 100</span>
                                </div>
                                <div class="vitals-row">
                                    <div class="bar-label pp-label">PP</div>
                                    <div class="bar-bg">
                                        <div class="bar-fill pp-fill" style="width: 30%;"></div>
                                    </div>
                                    <span class="bar-value" id="enemy-pp-val">3 / 10</span>
                                </div>
                            </div>
                        </div>
                        <div class="monster-portrait-container">
                            <div class="monster-float-layer">
                                <img src="./assets/images/Nitrophil.png" alt="Enemy" class="monster-portrait enemy-img"
                                    onerror="this.src='./assets/images/Card_Placeholder.png'">
                            </div>
                        </div>
                        <div class="enemy-bench">
                            <div class="enemy-bench-slot bench-slot" data-index="0"></div>
                            <div class="enemy-bench-slot bench-slot" data-index="1"></div>
                        </div>
                    </section>


                    <!-- PLAYER SIDE (BOTTOM) -->
                    <section class="combatant-display player-display">
                        <div class="player-bench">
                            <div class="bench-slot" data-index="0"></div>
                            <div class="bench-slot" data-index="1"></div>
                        </div>
                        <div class="monster-portrait-container active-monster-dropzone">
                            <div class="monster-float-layer">
                                <img src="./assets/images/Nitrophil.png" alt="Player"
                                    class="monster-portrait player-img"
                                    onerror="this.src='./assets/images/Card_Placeholder.png'">
                            </div>
                        </div>
                        <div class="character-vitals">
                            <div class="name"><span class="name-val">Nitrophil</span> <span id="player-rg"
                                    class="rg-label">RG-15</span></div>
                            <div class="vitals-stats">
                                <div class="vitals-row">
                                    <div class="bar-label">HP</div>
                                    <div class="bar-bg">
                                        <div class="bar-fill hp-fill" style="width: 100%;"></div>
                                    </div>
                                    <span class="bar-value" id="player-hp-val">100 / 100</span>
                                </div>
                                <div class="vitals-row">
                                    <div class="bar-label pp-label">PP</div>
                                    <div class="bar-bg">
                                        <div class="bar-fill pp-fill" style="width: 30%;"></div>
                                    </div>
                                    <span class="bar-value" id="player-pp-val">3 / 10</span>
                                </div>
                            </div>
                        </div>
                    </section>
                </main>

                <!-- COMMAND ZONE (RIGHT PANEL) -->
                <aside id="command-zone" class="glass-panel">
                    <!-- TURN/STATUS INDICATOR (MOVED TO TOP) -->
                    <div id="battle-status">
                        <div class="turn-indicator">YOUR TURN</div>
                        <div class="phase-label">NODE SELECTION</div>
                    </div>
                    <div class="pentagon-interface">
                        <div class="pentagon-container" id="interactive-pentagon">
                            <div class="pentagon-shape"></div>
                            <div class="node" data-index="0" style="--angle: 0deg;"></div>
                            <div class="node" data-index="1" style="--angle: 72deg;"></div>
                            <div class="node" data-index="2" style="--angle: 144deg;"></div>
                            <div class="node" data-index="3" style="--angle: 216deg;"></div>
                            <div class="node" data-index="4" style="--angle: 288deg;"></div>

                            <!-- Draggable Central Core -->
                            <div id="selection-core" class="draggable-core"></div>
                        </div>
                    </div>

                    <div class="command-controls">
                        <div class="moveset">
                            <button class="move-btn active" data-move="membrane_pierce">
                                <span class="move-name">Membrane Pierce</span>
                                <div class="move-stats-row"><span class="move-power">POW 40</span><span
                                        class="move-cost">0 PP</span></div>
                            </button>
                            <button class="move-btn" data-move="oxidative_purge">
                                <span class="move-name">Oxidative Purge</span>
                                <div class="move-stats-row"><span class="move-power">POW 55</span><span
                                        class="move-cost">3 PP</span></div>
                            </button>
                            <button class="move-btn" data-move="nitric_burst">
                                <span class="move-name">Nitric Burst</span>
                                <div class="move-stats-row"><span class="move-power">POW 60</span><span
                                        class="move-cost">6 PP</span></div>
                            </button>
                        </div>

                        <div id="move-info-panel" class="hidden">
                            <div id="info-move-name" class="neon-text">MOVE NAME</div>
                            <div id="info-move-desc">Tactical data loading...</div>
                        </div>
                    </div>
                </aside>
            </div>
        </div>

        <!-- Switching Confirmation Modal -->
        <div id="switch-confirm-modal" class="overlay hidden">
            <div class="modal glass-panel">
                <h2 id="switch-title">INITIATE <span class="neon-text">REDEPLOYMENT</span></h2>
                <p id="switch-message">Switch to [MONSTER]? This will conclude your current turn.</p>
                <div class="modal-buttons">
                    <button id="btn-confirm-switch" class="btn-neon">CONFIRM</button>
                    <button id="btn-cancel-switch" class="btn-neon">ABORT</button>
                </div>
            </div>
        </div>

        <!-- Game Over Overlay -->
        <div id="game-over-overlay" class="overlay hidden">
            <div class="modal glass-panel">
                <h2 id="game-over-title">SYSTEM <span class="neon-text">FAILURE</span></h2>
                <p id="game-over-message">NITROPHIL has been neutralized.</p>
                <div class="modal-buttons">
                    <button id="btn-restart" class="btn-neon">REINITIALIZE</button>
                    <button id="btn-return-menu" class="btn-neon">MAIN MENU</button>
                </div>
            </div>
        </div>

        <!-- Full-screen Card Preview Overlay -->
        <div id="card-preview-overlay" class="overlay hidden">
            <div class="preview-content">
                <img id="preview-image" src="" alt="Card Display">
                <div class="preview-hint">CLICK ANYWHERE OR PRESS ESC TO CLOSE</div>
            </div>
        </div>
    </div>

    <!-- Bio-Scan Overlay (Topmost Layer) -->
    <div id="bio-scan-overlay" class="hidden">
        <div class="scan-line"></div>
        <div class="scan-grid"></div>
    </div>

    <!-- Card Detail Modal -->
    <div id="card-detail-modal" class="modal-overlay">
        <div class="modal-content glass-panel card-detail-panel">
            <button class="modal-close" id="close-card-detail">&times;</button>
            <div class="card-detail-layout">
                <div class="card-large-preview">
                    <img id="detail-card-image" src="./assets/images/Card_Placeholder.png" alt="Card Preview">
                    <div id="detail-card-rarity" class="rarity-label"></div>
                    <div id="detail-card-tier" class="card-tier-label"></div>
                    <div id="detail-leader-tag" class="leader-type-tag"></div>
                </div>
                <div class="card-info-side">
                    <h2 id="detail-card-name" class="neon-text">CARD NAME</h2>
                    <div id="detail-card-type" class="detail-stat-row">TYPE: <span class="white-text">STAT</span></div>
                    <p id="detail-card-desc" class="detail-description">Card description goes here...</p>
                    <div id="detail-card-stats" class="detail-stats-grid">
                        <!-- Stats injected here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="src/main.js"></script>
</body>

</html>